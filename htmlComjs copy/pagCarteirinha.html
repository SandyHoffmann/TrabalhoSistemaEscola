<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Trabalho</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <link
      rel="shortcut icon"
      href="https://img.icons8.com/ios/250/000000/classroom.png"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css2.css" />
    <link rel="stylesheet" href="css.css" />
    <link rel="stylesheet" href="cssindex.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <button
            type="button"
            class="navbar-toggle"
            data-toggle="collapse"
            data-target="#myNavbar"
          >
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Class</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
          <ul
            id="Home"
            class="nav navbar-nav"
            style="background-color: #ffb5a7"
          >
            <li class="active">
              <a href="#" style="background-color: #ffb5a7">Home</a>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#"
                >Page 1 <span class="caret"></span
              ></a>
              <ul class="dropdown-menu" style="background-color: black">
                <li><a href="#">Page 1-1</a></li>
                <li><a href="#">Page 1-2</a></li>
                <li><a href="#">Page 1-3</a></li>
              </ul>
            </li>
            <li><a href="#">Page 2</a></li>
            <li><a href="#">Page 3</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="#"
                ><span class="glyphicon glyphicon-user"></span> Sign Up</a
              >
            </li>
            <li>
              <a href="#"
                ><span class="glyphicon glyphicon-log-in"></span> Login</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="carteira">
      
      <h4 class="nome-estudante">Nome do Estudante</h4>
      <img class="img" src="default-user-image.png" alt="icone" />
      <h4 class="matricula">Matrícula</h4>
      <h4 class="email">Email</h4>
      <h4 class="telefone">Telefone</h4>
      <div style="display: grid;grid-template-columns: 20% 20% 1fr;">
        <div>
          <p>Nota 1</p>
          <h4 class="n1"></h4>
        </div>
        <div>
          <p>Nota 2</p>
          <h4 class="n2"></h4>
        </div>
        <div>
          <p>Nota 3</p>
          <h4 class="n3"></h4>
        </div>
        <div>
          <p>Media</p>
          <h4 class="media"></h4>
        </div>
      </div>
      <div>
        <button type="button" class="btn btn" data-toggle="modal" data-target=".bd-example-modal-lg-m">Editar Informações/Colocar Notas</button>
      </div>
    </div>

    <div class="modal fade bd-example-modal-lg-m" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="titulo-cadastro">
            <h1>Editar Aluno</h1>
          </div>
          <form>
            <div class="form-group">
              <div class="form-group col-md-6">
                <label for="inputTelefone4">Telefone</label>
                <input type="telefone" class="form-control" id="inputTelefone" placeholder="Digite o número do telefone do aluno">
              </div>
            <div class="form-group col-md-6">
              <label for="inputNome">Nome</label>
              <input type="nome" class="form-control" id="inputNome" placeholder="Digite o nome do aluno">
            </div>
            <div class="form-group">
              <label for="inputEmail">E-mail</label>
              <input type="email" class="form-control" id="inputEmail" placeholder="Digite o e-mail do aluno">
          </div>
            <div class="form-group" style="display: flex; justify-content: space-between;">
              <div class="form-group col-md-3">
              <label for="n1">Nota 1</label>
              <input type="number" class="form-control" id="n1" placeholder="Nota 1">
              </div>
              <div class="form-group col-md-3">
              <label for="n2">Nota 2</label>
              <input type="number" class="form-control" id="n2" placeholder="Nota 2">
            </div>
            <div class="form-group col-md-3">
              <label for="n3">Nota 3</label>
              <input type="number" class="form-control" id="n3" placeholder="Nota 3">
            </div>
            </div>
            <div class="form-group" id="centralizarBotao">
            <a class="btn btn" id="botaoAluno">Enviar</a>
            </div>
          </form>
          </div>
        </div>
      </div>
    </div>
    <footer class="page-footer site-footer">
      <div class="container">
        <div class="row">
          <div class="col-sm-12 col-md-6">
            <h6>Sobre</h6>
            <p class="text-justify">
              Lorem ipsum dolor sit, amet consectetur adipisicing elit. Labore
              animi inventore iure nemo similique reprehenderit possimus aperiam
              quod vero exercitationem quo dolorum expedita sint, est ea atque
              modi unde accusantium.
            </p>
          </div>

          <div class="col-xs-6 col-md-3">
            <h6>Outra coisa se precisar</h6>
            <ul class="footer-links">
              <li><a href="#">algo</a></li>
              <li><a href="#">algo</a></li>
              <li><a href="#">algo</a></li>
            </ul>
          </div>
          <div>
            <h6>Links?</h6>
            <ul class="footer-links">
              <li><a href="#">algo</a></li>
              <li><a href="#">algo</a></li>
              <li><a href="#">algo</a></li>
            </ul>
          </div>
        </div>
        <hr />
      </div>
      <div class="container">
        <div class="row">
          <div class="col-md-8 col-sm-6 col-xs-12">
            <p class="copyright-text">Copyright by a gente</p>
          </div>
          <div>
            <ul class="social-icons">
              <li>
                <a class="facebook" href="#"><i class="fa fa-facebook"></i></a>
              </li>
              <li>
                <a class="twitter" href="#"><i class="fa fa-twitter"></i></a>
              </li>
              <li>
                <a class="dribbble" href="#"><i class="fa fa-dribbble"></i></a>
              </li>
              <li>
                <a class="linkedin" href="#"><i class="fa fa-linkedin"></i></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <script type="module">
          import { Turma } from './js/turma.js'
          import { armazenarValores, instanciaAlunos, instanciaTurmas } from './js/backend.js'
          let input2 = document.querySelector("#inputNome")
          let input3 = document.querySelector("#inputEmail")
          let input4 = document.querySelector("#inputTelefone")
          let input5 = document.querySelector("#n1")
          let input6 = document.querySelector("#n2")
          let input7 = document.querySelector("#n3")
    window.addEventListener("load", () => {
        let query = new URLSearchParams(location.search)
        let matricula = query.get("matricula")
        let turma = JSON.parse(localStorage.getItem("listaTurmas"))
        let lista_turmas = instanciaTurmas(turma)
        let lista_alunos = instanciaAlunos(turma)
        for (let x of lista_turmas){
            for (let aluno of x.alunos){
                if (aluno.matricula == matricula){
                    console.log(aluno.matricula)
                    document.querySelector(".matricula").textContent = aluno.matricula
                    document.querySelector(".nome-estudante").textContent = aluno.nome
                    document.querySelector(".email").textContent = aluno.email
                    document.querySelector(".telefone").textContent = aluno.telefone

                    input2.value = aluno.nome
                    input3.value = aluno.email
                    input4.value = aluno.telefone
                    console.log(aluno)
                    if (aluno.nota){
                      document.querySelector(".n1").textContent = aluno.nota[0]
                      document.querySelector(".n2").textContent = aluno.nota[1]
                      document.querySelector(".n3").textContent = aluno.nota[2]
                      document.querySelector(".media").textContent = aluno.media
                    }
                    // input5.value = aluno.nota[0]
                    // input6.value = aluno.nota[1]
                    // input7.value = aluno.nota[2]
                }
            }}
        })
    
    let botao = document.querySelector("#botaoAluno")

    botao.addEventListener("click", (event) => {
        let query = new URLSearchParams(location.search)
        let matricula = query.get("matricula")
        let turma2 = JSON.parse(localStorage.getItem("listaTurmas"))
        let lista_turmas = instanciaTurmas(turma2)
        let lista_alunos = instanciaAlunos(turma2)
        for (let x of lista_turmas) {
            for (let i = 0; i < x.alunos.length; i++) {
                if (x.alunos[i].matricula == matricula) {
                    x.alunos[i].editarInformacoes(input2.value, input3.value, input4.value)
                    if (input7.value){
                      x.alunos[i].cadastraNotas(input5.value,input6.value,input7.value)
                      x.alunos[i].calculaMedia()
                      }
                      console.log(x.alunos[i])
                }
            }
            console.log(lista_turmas)
            armazenarValores(lista_turmas)
        }
        })

    </script>
  </body>
</html>
